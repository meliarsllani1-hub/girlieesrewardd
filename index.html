<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SHEIN Gift Card</title>

<link rel="preconnect" href="https://fonts.googleapis.com"/>
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700;800;900&display=swap" rel="stylesheet"/>

<style>
  :root{
    --pink:#ff4fa6;
    --pink2:#ff7ec6;
    --text:#111;
    --muted:#6d6d6d;
    --card:#ffffff;
    --line:#eeeeee;
    --shadow:0 10px 28px rgba(0,0,0,.10);
    --shadowSoft:0 10px 24px rgba(0,0,0,.06);
  }

  *{box-sizing:border-box;}
  body{
    background:#f6f6f8;
    margin:0;
    font-family:-apple-system,BlinkMacSystemFont,"SF Pro Display","SF Pro Text","Helvetica Neue",Arial,'Montserrat',sans-serif;
    color:var(--text);
  }

  .wrap{
    max-width:520px;
    margin:0 auto;
    padding:16px 14px 92px;
    position:relative;
  }

  .top-card{
    background:rgba(255,255,255,.95);
    border:1px solid rgba(0,0,0,.06);
    border-radius:20px;
    padding:10px 12px 10px;
    box-shadow:0 8px 20px rgba(0,0,0,.05);
    margin:4px 0 12px;
  }

  .top{text-align:center;}
  .avatar{
    width:78px;height:78px;border-radius:50%;
    display:block;margin:6px auto 10px;
    box-shadow:0 8px 20px rgba(0,0,0,.10);
  }
  .kicker{
    font-size:14px;color:var(--muted);
    margin:0 0 6px;font-weight:800;letter-spacing:.1px;
  }
  .headline{
    font-size:19px;line-height:1.18;
    margin:0 0 8px;font-weight:900;letter-spacing:-.3px;
  }
  .sub{
    font-size:14px;color:var(--muted);
    margin:0 0 2px;line-height:1.45;font-weight:700;
  }

  .shein-btn{
    background:linear-gradient(135deg,var(--pink),var(--pink2));
    color:#fff;padding:15px 18px;
    border:0;cursor:pointer;
    display:flex;align-items:center;justify-content:flex-start;
    border-radius:999px;width:100%;margin:12px auto 12px;
    text-decoration:none;position:relative;
    transition:transform .18s ease, filter .18s ease;
    box-shadow:0 16px 38px rgba(255,79,166,.24);
    -webkit-tap-highlight-color:transparent;
    user-select:none;
  }
  .shein-btn:hover{transform:scale(1.02); filter:saturate(1.03);}
  .shein-btn:active{transform:scale(0.99);}

  .btn-icon{
    width:44px;height:44px;border-radius:50%;
    flex:0 0 auto;
    box-shadow:0 8px 18px rgba(0,0,0,.12);
    background:#fff;
  }
  .btn-text{
    flex:1;display:flex;flex-direction:column;
    align-items:flex-start;margin-left:12px;
    min-width:0;
  }
  .btn-title{font-size:16px;font-weight:900;line-height:1.15;}
  .btn-sub{font-size:12px;opacity:.96;margin-top:3px;font-weight:800;}

  .micro{text-align:center;font-size:12px;color:#7a7a7a;margin:8px 0 10px;font-weight:800;}

  .eligible-box{
    background:rgba(255,255,255,.92);
    margin:10px auto 18px;padding:11px 14px;
    font-size:13px;text-align:center;color:#333;
    border-radius:14px;border:1px solid rgba(238,238,238,.9);
    box-shadow:0 8px 18px rgba(0,0,0,.05);
    font-weight:900;min-height:40px;
    display:flex;align-items:center;justify-content:center;
  }

  .divider{
    height:1px;
    background:linear-gradient(90deg, transparent, rgba(0,0,0,.06), transparent);
    margin:14px 0 10px;
  }

  details.how{
    margin:12px 0 18px;
    border:1px solid rgba(238,238,238,.95);
    border-radius:18px;
    padding:12px;
    background:rgba(255,255,255,.96);
    box-shadow:var(--shadowSoft);
  }
  details.how summary{
    cursor:pointer;
    font-weight:900;
    font-size:13px;
    color:#222;
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:10px;
    -webkit-tap-highlight-color:transparent;
    user-select:none;
  }
  details.how summary:active{opacity:.75;}

  .tap-pill{
    font-size:11px;font-weight:900;padding:5px 10px;border-radius:999px;
    border:1px solid #f1f1f1;background:#fafafa;color:#333;
  }

  .steps{margin-top:10px;font-size:13px;color:#333;line-height:1.55;font-weight:800;}
  .step-row{display:flex;gap:10px;align-items:flex-start;padding:7px 6px;border-radius:12px;}
  .step-row:not(:last-child){border-bottom:1px solid rgba(0,0,0,.04);}
  .step-num{
    width:24px;height:24px;border-radius:999px;
    background:rgba(255,79,166,.12);
    color:#ff2f97;
    display:flex;align-items:center;justify-content:center;
    font-weight:900;font-size:12px;margin-top:1px;
    flex:0 0 auto;
  }
  .step-text{flex:1;}

  .proof-headline{text-align:center;font-size:16px;font-weight:900;margin:22px 0 12px;color:#222;}
  .proof-image{
    width:100%;max-width:420px;border-radius:16px;
    display:block;margin:12px auto 16px auto;
    box-shadow:var(--shadow);background:#f8f8f8;height:auto;
  }

  .footer-trust{text-align:center;font-size:12px;color:#8a8a8a;margin:10px 0 0;font-weight:800;}

  .sticky-wrap{
    position:fixed;left:0;right:0;bottom:0;z-index:50;
    padding:10px 12px 12px;background:rgba(255,255,255,.88);
    backdrop-filter:saturate(1.2) blur(10px);
    border-top:1px solid rgba(240,240,240,.95);
    box-shadow:0 -12px 30px rgba(0,0,0,.08);
    display:none;
  }
  .sticky-inner{max-width:520px;margin:0 auto;}
  .sticky-note{text-align:center;font-size:11px;font-weight:900;color:#777;margin:0 0 6px;}
</style>
</head>

<body>
  <div class="wrap">

    <div class="top-card">
      <div class="top">
        <img class="avatar" src="https://i.postimg.cc/rppXNYm8/67829a8592805-66f2edc54b343-image1.png" alt=""/>
        <p class="kicker">if you‚Äôre wondering too‚Ä¶</p>
        <h1 class="headline">it‚Äôs the SHEIN gift card you saw on IG üíñ</h1>
        <p class="sub">Tap the button below to continue.</p>
      </div>
    </div>

    <!-- CTA -->
    <a href="#" class="shein-btn cta-link" id="shein-btn" aria-label="SHEIN Gift Card">
      <img class="btn-icon" src="https://i.postimg.cc/zBfxrrSy/c5910bd5-e5b2-4c70-b124-9560d8cbf698-link-in-bio-links-block-home-2af2051e-f17c-4f49-8af7-1eac99.webp" alt=""/>
      <div class="btn-text">
        <span class="btn-title">Unlock SHEIN Gift Card</span>
        <span class="btn-sub">Tap to continue ‚Üí</span>
      </div>
    </a>

    <p class="micro">üîí secure ‚Ä¢ mobile-friendly</p>

    <div class="eligible-box" id="eligible-box">üåç Checking availability...</div>

    <div class="divider"></div>

    <details class="how" id="how">
      <summary>
        <span class="left">
          <span>How It Works</span>
          <span class="tap-pill">View steps</span>
        </span>
        <span class="chev" aria-hidden="true">‚Ä∫</span>
      </summary>

      <div class="steps">
        <div class="step-row">
          <div class="step-num">1</div>
          <div class="step-text">Tap the pink button above üëÜ</div>
        </div>
        <div class="step-row">
          <div class="step-num">2</div>
          <div class="step-text">Enter your email + basic info</div>
        </div>
        <div class="step-row">
          <div class="step-num">3</div>
          <div class="step-text">Complete the recommended deals</div>
        </div>
        <div class="step-row">
          <div class="step-num">4</div>
          <div class="step-text">Claim your gift card ‚úÖ</div>
        </div>
      </div>
    </details>

    <div class="proof-headline">Real rewards. Real screenshots üëá</div>
    <img class="proof-image" src="https://i.postimg.cc/ZqFcCJSC/upscalemedia-transformed.jpg" alt=""/>
    <img class="proof-image" src="https://i.postimg.cc/3NWCSpDv/upscalemedia-transformed-1.jpg" alt=""/>

    <p class="footer-trust">Powered by trusted partners ‚Ä¢ 256-bit encryption</p>

  </div>

  <!-- Sticky CTA -->
  <div class="sticky-wrap" id="sticky-wrap">
    <div class="sticky-inner">
      <p class="sticky-note">Tap to continue</p>
      <a href="#" class="shein-btn cta-link" id="shein-btn-sticky" aria-label="SHEIN Gift Card Sticky">
        <img class="btn-icon" src="https://i.postimg.cc/zBfxrrSy/c5910bd5-e5b2-4c70-b124-9560d8cbf698-link-in-bio-links-block-home-2af2051e-f17c-4f49-8af7-1eac99.webp" alt=""/>
        <div class="btn-text">
          <span class="btn-title">Unlock SHEIN Gift Card</span>
          <span class="btn-sub">Tap to continue ‚Üí</span>
        </div>
      </a>
    </div>
  </div>

  <!-- UMAMI -->
  <script defer src="https://cloud.umami.is/script.js" data-website-id="8ca5b018-f00b-4957-8139-ce0333d8fce2"></script>

  <script>
    const eligibleBox = document.getElementById('eligible-box');
    const stickyWrap = document.getElementById('sticky-wrap');
    const buttons = document.querySelectorAll('.cta-link');

    // redirect links (UNCHANGED)
    const linkUS="https://glctrk.org/aff_c?offer_id=3091&aff_id=15802";
    const linkCA="https://glctrk.org/aff_c?offer_id=3105&aff_id=15802";
    const linkGB="https://glctrk.org/aff_c?offer_id=1224&aff_id=15802";
    const linkAU="https://glctrk.org/aff_c?offer_id=3105&aff_id=15802";
    const linkRest="https://rewardorbit.com/r/eyJ0Ijoic2hlaW4iLCJ1IjoiNjdkNTliZmEzNjlmZTUyYjM5YTAwOTdmIiwiYSI6Ijc1MCIsInRzIjoxNzY1MjMyNDg5MjAyfQ?amount=750";

    // default instantly for ALL buttons
    buttons.forEach(b => b.href = linkRest);

    // ---- GEO FIX (high-traffic safe): timeout + cache-bust + 3 providers + final fallback ----
    const withTimeout = (p, ms=1200) =>
      Promise.race([p, new Promise((_,rej)=>setTimeout(()=>rej(new Error("timeout")), ms))]);

    const tryProvider = async (url, mapFn) => {
      const sep = url.includes("?") ? "&" : "?";
      const r = await withTimeout(fetch(url + sep + "_=" + Date.now(), {
        cache: "no-store",
        credentials: "omit"
      }), 1200);
      if(!r.ok) throw new Error("bad_status_" + r.status);
      const d = await r.json();
      const out = mapFn(d);
      if(!out || !out.cc) throw new Error("bad_payload");
      return out;
    };

    (async()=>{
      try{
        // 1) ipapi
        const {cc, cn} = await tryProvider("https://ipapi.co/json/", d => ({ cc: d.country, cn: d.country_name }));
        setEligible(cc, cn);
        return;
      }catch(e){}

      try{
        // 2) ipwho
        const {cc, cn} = await tryProvider("https://ipwho.is/", d => ({ cc: d.country_code, cn: d.country }));
        setEligible(cc, cn);
        return;
      }catch(e){}

      try{
        // 3) ipinfo (extra backup for high-traffic spikes)
        const {cc, cn} = await tryProvider("https://ipinfo.io/json", d => ({ cc: d.country, cn: d.country }));
        setEligible(cc, cn);
        return;
      }catch(e){}

      // Final fallback: don't leave "Checking..."
      eligibleBox.textContent = "‚úÖ Reward available üåç";
    })();
    // ----------------------------------------------------------------------------------------

    function countryCodeToFlagEmoji(cc){
      if(!cc || cc.length!==2) return "";
      return String.fromCodePoint(...[...cc.toUpperCase()].map(c=>127397+c.charCodeAt()));
    }

    function setEligible(cc, cn){
      // cn may be missing on some providers; keep message clean
      eligibleBox.textContent = cn
        ? `‚úÖ Reward available in ${cn} ${countryCodeToFlagEmoji(cc)}`
        : `‚úÖ Reward available ${countryCodeToFlagEmoji(cc)}`;

      let target = linkRest;
      if(cc==="US") target = linkUS;
      else if(cc==="CA") target = linkCA;
      else if(cc==="GB") target = linkGB;
      else if(cc==="AU") target = linkAU;

      buttons.forEach(b => b.href = target);
    }

    // Umami tracking with delay to fire before redirect (UNCHANGED EVENT NAME)
    buttons.forEach((btn)=>{
      btn.addEventListener('click',(e)=>{
        e.preventDefault();
        const url = btn.href;
        if(window.umami) umami.track("SHEIN Offer Click");
        setTimeout(()=>{window.location.href=url;},160);
      });
    });

    // show sticky CTA after small scroll
    window.addEventListener('scroll', ()=>{
      if(window.scrollY > 140) stickyWrap.style.display = 'block';
      else stickyWrap.style.display = 'none';
    }, {passive:true});
  </script>
</body>
</html>
