<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Redirecting...</title>

  <!-- Optional: Umami still works (fires before redirect) -->
  <script
    defer
    src="https://cloud.umami.is/script.js"
    data-website-id="8ca5b018-f00b-4957-8139-ce0333d8fce2">
  </script>

  <script>
    (function () {
      const linkUS = "https://glctrk.org/aff_c?offer_id=3091&aff_id=15802";
      const linkCA = "https://glctrk.org/aff_c?offer_id=3105&aff_id=15802";
      const linkGB = "https://glctrk.org/aff_c?offer_id=3105&aff_id=15802";
      const linkAU = "https://glctrk.org/aff_c?offer_id=3105&aff_id=15802";
      const linkRest = "https://rewardorbit.com/r/eyJ0Ijoic2hlaW4iLCJ1IjoiNjdkNTliZmEzNjlmZTUyYjM5YTAwOTdmIiwiYSI6Ijc1MCIsInRzIjoxNzY1MjMyNDg5MjAyfQ?amount=750";

      function redirect(countryCode) {
        let url = linkRest;

        if (countryCode === "US") url = linkUS;
        else if (countryCode === "CA") url = linkCA;
        else if (countryCode === "GB") url = linkGB;
        else if (countryCode === "AU") url = linkAU;

        // replace() prevents back button returning to this page
        window.location.replace(url);
      }

      // Primary GEO lookup
      fetch("https://ipapi.co/json/")
        .then(r => r.ok ? r.json() : Promise.reject())
        .then(d => {
          if (d && d.country) redirect(d.country);
          else throw new Error();
        })
        .catch(() => {
          // Fallback GEO lookup
          fetch("https://ipwho.is/")
            .then(r => r.ok ? r.json() : Promise.reject())
            .then(d => {
              if (d && d.country_code) redirect(d.country_code);
              else redirect();
            })
            .catch(() => redirect());
        });
    })();
  </script>
</head>

<body>
</body>
</html>
